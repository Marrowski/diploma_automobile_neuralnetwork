{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>{% block title %}Car Detector System{% endblock %}</title>
    {% tailwind_css %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body class="min-h-screen flex flex-col bg-white text-blue-900">

    <header style="background-color: oklch(78.9% 0.154 211.53);" class="text-white shadow-md">
        <div class="container mx-auto flex items-center justify-between px-4 py-3">
             <div class="w-6 h-4 flex items-center justify-center overflow-hidden">
                <a href="{% url 'base' %}" target="_blank" class="block">
                    <img src="/media/logo.png" alt="Car Detector Logo" class="h-3.5 w-auto object-contain hover:opacity-90 transition">
                </a>
            </div>

            <a href="{% url 'base' %}" target="_blank"
             class="text-2xl font-semibold text-white hover:text-blue-200 transition">
            Інтегрована система свій/чужий
            </a>
            <nav class="relative flex items-center gap-3">
                  {% if user.is_authenticated %}
                    <button id="userMenuButton" type="button"
                            class="block rounded-full outline-none ring-0 focus:ring-2 focus:ring-white/60"
                            aria-haspopup="true" aria-expanded="false">
                      <img src="{{ user.userprofile.avatar.url|default:'/media/avatars/user.png' }}"
                           alt="Avatar"
                           class="w-8 h-8 rounded-full object-cover border border-white hover:scale-105 transition duration-200">
                    </button>

                    <div id="userMenu"
                         class="hidden absolute right-0 mt-2 w-44 bg-white text-gray-800 rounded-lg shadow-lg ring-1 ring-black/5 overflow-hidden z-50">
                      <a href="{% url 'profile' %}"
                         class="flex items-center gap-2 px-3 py-2 hover:bg-blue-50">
                        <svg class="w-4 h-4 text-blue-600" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-3.8 0-6.5 1.9-6.5 4v.5A1.5 1.5 0 0 0 7 20h10a1.5 1.5 0 0 0 1.5-1.5V18c0-2.1-2.7-4-6.5-4Z"/></svg>
                        Профіль
                      </a>

                      <form method="post" action="{% url 'logout' %}">
                        {% csrf_token %}
                        <button type="submit"
                                class="w-full flex items-center gap-2 px-3 py-2 text-left hover:bg-red-50">
                          <svg class="w-4 h-4 text-red-600" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 17v2a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v2h-2V5a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2zm2.586-8L16 6.414 17.414 5 22 9.586 17.414 14 16 12.586 18.586 10H9V8z"/>
                          </svg>
                          Вихід
                        </button>
                      </form>
                    </div>
                  {% else %}
                    <a href="{% url 'register' %}" class="text-blue-100 hover:text-white transition text-sm">
                      Вхід / Реєстрація
                    </a>
                  {% endif %}
                </nav>


        </div>

    {% block header_extra %}
        <div class="container mx-auto px-4 pb-4">
            <h2 class="text-lg font-semibold mb-2">Втрати росії проти України</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-3 text-center text-sm">
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{units}}</div>
                    <div class="opacity-80">особовий склад</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{tanks}}</div>
                    <div class="opacity-80">танки</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{afv}}</div>
                    <div class="opacity-80">ББМ</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{art}}</div>
                    <div class="opacity-80">арт. системи</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{mlrs}}</div>
                    <div class="opacity-80">РСЗВ</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{aaws}}</div>
                    <div class="opacity-80">ППО</div>
                </div>
            </div>
    
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-3 mt-3 text-center text-sm">
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{planes}}</div>
                    <div class="opacity-80">літаки</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{heli}}</div>
                    <div class="opacity-80">гелікоптери</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{uav}}</div>
                    <div class="opacity-80">БПЛА</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{cm}}</div>
                    <div class="opacity-80">підводні човни</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{vft}}</div>
                    <div class="opacity-80">кораблі</div>
                </div>
                <div class="bg-blue-900/20 rounded-md p-2">
                    <div class="text-xl font-bold">{{atgm}}</div>
                    <div class="opacity-80">техніка/засоби</div>
                </div>
            </div>
        </div>
    {% endblock %}
    </header>

    <main class="flex-grow container mx-auto px-4 py-12 flex flex-col items-center">
        {% block content %}
        <div class="flex flex-col md:flex-row gap-6 w-full max-w-5xl">
            <div class="flex-1 bg-blue-100 rounded-lg shadow-md p-6 flex flex-col justify-between min-h-[200px]">
                <h2 class="text-xl font-semibold mb-2">Швидка робота</h2>
                <p class="text-blue-800 flex-grow">
                    Наша система працює миттєво — розпізнавання номерного знаку виконується за лічені мілісекунди. Завдяки оптимізованим алгоритмам та сучасним нейронним мережам ми
                     забезпечуємо блискавичну обробку даних навіть при великому потоці транспорту. Більше ніяких черг чи затримок — лише точність і швидкість..
                </p>
            </div>
            <div class="flex-1 bg-blue-100 rounded-lg shadow-md p-6 flex flex-col justify-between min-h-[200px]">
                <h2 class="text-xl font-semibold mb-2">Чому саме ми?</h2>
                <p class="text-blue-800 flex-grow">
                    Висока точність: Нейромережа навченa на мільйонах зразків, що гарантує коректне визначення навіть складних номерів.
                    Гнучка інтеграція: Легко підключається до існуючих систем контролю доступу.
                    Надійність: Наші сервери забезпечують безперебійну роботу 24/7 та захищені від збоїв.
                    Підтримка: Ми супроводжуємо клієнта на кожному етапі — від впровадження до технічної підтримки.
                </p>
            </div>
            <div class="flex-1 bg-blue-100 rounded-lg shadow-md p-6 flex flex-col justify-between min-h-[200px]">
                <h2 class="text-xl font-semibold mb-2">Долучайся зараз</h2>
                <p class="text-blue-800 flex-grow">
                    Стань частиною сучасної системи безпеки вже сьогодні!
                    Зареєструйся, підключи свої камери та автоматизуй контроль в’їзду й виїзду.
                    Надійний контроль — це просто, коли за справу береться штучний інтелект.
                </p>
            </div>
        </div>

        <button type="button" class="mt-8 px-6 py-3 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-colors duration-200">
            Почати
        </button>
        {% endblock %}
    </main>

    <footer style="background-color: oklch(78.9% 0.154 211.53);" class="text-white text-center py-4 mt-auto">
        &copy; 2025 Інтегровна система свій/чужий. Всі права захищені.
    </footer>

    {% if debug %}
    <script src="{% url 'django_browser_reload:reload' %}"></script>
    {% endif %}

    <script src="{% static 'js/profile.js' %}"></script>

</body>
</html>
